var arrayObjectProducts_GalaxyS = [
    {
        id: 1,
        imageName: "galaxy-s8.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S8",
        price: 10990000,
        description: ""
    },

    {
        id: 2,
        imageName: "galaxy-s8-plus.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S8 Plus",
        price: 14490000,
        description: ""
    },

    {
        id: 3,
        imageName: "galaxy-s9.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S9",
        price: 19990000,
        description: ""
    },

    {
        id: 4,
        imageName: "galaxy-s9-plus.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S9 Plus",
        price: 19990000,
        description: ""
    },

    {
        id: 5,
        imageName: "galaxy-s10.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S10",
        price: 20990000,
        description: ""
    },

    {
        id: 6,
        imageName: "galaxy-s10-lite.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S10 Lite",
        price: 16990000,
        description: ""
    },

    {
        id: 7,
        imageName: "galaxy-s10-plus.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S10 Plus",
        price: 18990000,
        description: ""
    },

    {
        id: 8,
        imageName: "galaxy-s20.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S20",
        price: 16490000,
        description: ""
    },

    {
        id: 9,
        imageName: "galaxy-s20-plus.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S20 Plus",
        price: 23990000,
        description: ""
    }
];

var arrayObjectProducts_GalaxyNote = [
    {
        id: 1,
        imageName: "galaxy-note-8.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 8",
        price: 11990000,
        description: ""
    },

    {
        id: 2,
        imageName: "galaxy-note-9.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 9",
        price: 22990000,
        description: ""
    },

    {
        id: 3,
        imageName: "galaxy-note-10.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 10",
        price: 15990000,
        description: ""
    },

    {
        id: 4,
        imageName: "galaxy-note-10-lite.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 10 Lite",
        price: 11490000,
        description: ""
    },

    {
        id: 5,
        imageName: "galaxy-note-10-plus.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 10 Plus",
        price: 17990000,
        description: ""
    },

    {
        id: 6,
        imageName: "galaxy-note-20.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 20",
        price: 23990000,
        description: ""
    },

    {
        id: 7,
        imageName: "galaxy-note-20-ultra.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 20 Ultra",
        price: 28990000,
        description: ""
    }
];

var arrayObjectProducts_GalaxyA = [
    {
        id: 1,
        imageName: "galaxy-a10.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A10",
        price: 3190000,
        description: ""
    },

    {
        id: 2,
        imageName: "galaxy-a11.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A11",
        price: 3490000,
        description: ""
    },

    {
        id: 3,
        imageName: "galaxy-a20s.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A20s",
        price: 5390000,
        description: ""
    },

    {
        id: 4,
        imageName: "galaxy-a21s.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A21s",
        price: 5290000,
        description: ""
    },

    {
        id: 5,
        imageName: "galaxy-a30.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A30",
        price: 4090000,
        description: ""
    },

    {
        id: 6,
        imageName: "galaxy-a31.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A31",
        price: 6090000,
        description: ""
    },

    {
        id: 7,
        imageName: "galaxy-a50s.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A50s",
        price: 6990000,
        description: ""
    },

    {
        id: 8,
        imageName: "galaxy-a51.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A51",
        price: 7490000,
        description: ""
    }
];

var arrayObjectProducts_GalaxyZ = [
    {
        id: 1,
        imageName: "galaxy-fold.jpg",
        folderImage: "Galaxy_Z",
        name: "Samsung Galaxy Fold",
        price: 50000000,
        description: ""
    },

    {
        id: 2,
        imageName: "galaxy-z-flip.jpg",
        folderImage: "Galaxy_Z",
        name: "Samsung Galaxy Z Flip",
        price: 36000000,
        description: ""
    },

    {
        id: 3,
        imageName: "galaxy-z-fold2-5g.jpg",
        folderImage: "Galaxy_Z",
        name: "Samsung Galaxy Z Fold2 5G",
        price: 50000500,
        description: ""
    },

    {
        id: 4,
        imageName: "galaxy-z-fold2-5g-black.jpg",
        folderImage: "Galaxy_Z",
        name: "Samsung Galaxy Z Fold2 5G Black",
        price: 50000500,
        description: ""
    }
];

var arrayObjectProducts_Random = [
	{
        id: 1,
        imageName: "galaxy-s8.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S8",
        price: 10990000,
        description: ""
    },

    {
        id: 2,
        imageName: "galaxy-s8-plus.jpg",
        folderImage: "Galaxy_S",
        name: "Samsung Galaxy S8 Plus",
        price: 14490000,
        description: ""
    },

    {
        id: 3,
        imageName: "galaxy-a10.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A10",
        price: 3190000,
        description: ""
    },

    {
        id: 4,
        imageName: "galaxy-a11.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A11",
        price: 3490000,
        description: ""
    },

    {
        id: 5,
        imageName: "galaxy-a20s.jpg",
        folderImage: "Galaxy_A",
        name: "Samsung Galaxy A20s",
        price: 5390000,
        description: ""
    },

    {
        id: 6,
        imageName: "galaxy-z-fold2-5g.jpg",
        folderImage: "Galaxy_Z",
        name: "Samsung Galaxy Z Fold2 5G",
        price: 50000500,
        description: ""
    },

    {
        id: 7,
        imageName: "galaxy-note-9.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 9",
        price: 22990000,
        description: ""
    },

    {
        id: 8,
        imageName: "galaxy-note-10.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 10",
        price: 15990000,
        description: ""
    },

    {
        id: 9,
        imageName: "galaxy-note-10-lite.jpg",
        folderImage: "Galaxy_Note",
        name: "Samsung Galaxy Note 10 Lite",
        price: 11490000,
        description: ""
    },
];

function SendData(element) {
    var price=element.parentNode.parentNode.querySelector('.product__card-content-price').innerText;
    price=price.slice(0,price.length-2);
    var arrPriceTemp=price.split('.');
    var object={
        imgSrc: element.parentNode.parentNode.querySelector('img').getAttribute('src'),
        smartphoneName: element.parentNode.parentNode.querySelector('.product__card-content-name a').innerText,
        smartphonePrice: +arrPriceTemp.join('')
    }
    localStorage.setItem('myqueryProject',JSON.stringify(object));
}

function DoiTien(price) {
	var result=[];
	var arrT=price.toString().split('');
	arrT.reverse();
	var t=0;
	for (var j=0;j<=Math.floor(arrT.length/3);j++)
	{
		if (t+3>arrT.length-1)
			result.push(arrT.slice(t).reverse().join(''));
		else 
		{
			result.push(arrT.slice(t,t+3).reverse().join(''),'.');
		}
		t+=3;
	}
	result.reverse();
	return result;
}

function HienThiSortRowProducts(array, selectValue) {
	if (selectValue=="suitable")
	{
		var str="";
		for (var i=0;i<array.length;i++)
		{
			var pricePrint=DoiTien(array[i].price);
		    str+=`
		        <div class="product__card col-lg-4 col-md-6">
		            <div class="product__card-img">
		                <a href="ChiTietspPage.html" onclick="SendData(this)" class="product__card-img-link">
		                    <img src="./Assets/images/Products_Image/${array[i].folderImage}/${array[i].imageName}" alt="">
		                </a>
		            </div>

		            <div class="product__card-content">
		                <h4 class="product__card-content-name">
		                    <a href="#">${array[i].name}</a>
		                </h4>

		                <p class="product__card-content-price">
		                    ${pricePrint.join('')} <span>đ</span>
		                </p>
		            </div>
		    	</div>
		    `;
		}
		rowProducts.innerHTML=str;
	}
	if (selectValue=="c-e")
	{
		var str="";
		var arrTemp=array.map(function(element) {
			return element;
		});
		arrTemp.sort(function(x,y) {
			return x.price-y.price;
		});
		for (var i=0;i<arrTemp.length;i++)
		{
			var pricePrint=DoiTien(arrTemp[i].price);
		    str+=`
		        <div class="product__card col-lg-4 col-md-6">
		            <div class="product__card-img">
		                <a href="ChiTietspPage.html" onclick="SendData(this)" class="product__card-img-link">
		                    <img src="./Assets/images/Products_Image/${arrTemp[i].folderImage}/${arrTemp[i].imageName}" alt="">
		                </a>
		            </div>

		            <div class="product__card-content">
		                <h4 class="product__card-content-name">
		                    <a href="#">${arrTemp[i].name}</a>
		                </h4>

		                <p class="product__card-content-price">
		                    ${pricePrint.join('')} <span>đ</span>
		                </p>
		            </div>
		    	</div>
		    `;
		}
		rowProducts.innerHTML=str;
	}
	if (selectValue=="e-c") 
	{
		var str="";
		var arrTemp=array.map(function(element) {
			return element;
		});
		arrTemp.sort(function(x,y) {
			return y.price-x.price;
		});
		for (var i=0;i<arrTemp.length;i++)
		{
			var pricePrint=DoiTien(arrTemp[i].price);
		    str+=`
		        <div class="product__card col-lg-4 col-md-6">
		            <div class="product__card-img">
		                <a href="ChiTietspPage.html" onclick="SendData(this)" class="product__card-img-link">
		                    <img src="./Assets/images/Products_Image/${arrTemp[i].folderImage}/${arrTemp[i].imageName}" alt="">
		                </a>
		            </div>

		            <div class="product__card-content">
		                <h4 class="product__card-content-name">
		                    <a href="#">${arrTemp[i].name}</a>
		                </h4>

		                <p class="product__card-content-price">
		                    ${pricePrint.join('')} <span>đ</span>
		                </p>
		            </div>
		    	</div>
		    `;
		}
		rowProducts.innerHTML=str;
	}
}

var rowProducts=document.querySelector('.products.row');

// Xếp ngẫu nhiên các sản phẩm khi load trang web
var str="";
for (var i=0;i<arrayObjectProducts_Random.length;i++)
{
	var pricePrint=DoiTien(arrayObjectProducts_Random[i].price);
    str+=`
        <div class="product__card col-lg-4 col-md-6">
            <div class="product__card-img">
                <a href="ChiTietspPage.html" onclick="SendData(this)" class="product__card-img-link">
                    <img src="./Assets/images/Products_Image/${arrayObjectProducts_Random[i].folderImage}/${arrayObjectProducts_Random[i].imageName}" alt="">
                </a>
            </div>

            <div class="product__card-content">
                <h4 class="product__card-content-name">
                    <a href="#">${arrayObjectProducts_Random[i].name}</a>
                </h4>

                <p class="product__card-content-price">
                    ${pricePrint.join('')} <span>đ</span>
                </p>
            </div>
    	</div>
    `;
}
rowProducts.innerHTML=str;

var arrayButtons=document.querySelectorAll('.product__filter-btn button');

// Xếp các sản phẩn theo từng loại khi click vào button chọn loại
for (var i=0;i<arrayButtons.length;i++)
{
    if (arrayButtons[i].id=="gS")
    {
        arrayButtons[i].onclick=function(e) {
            HienThiSortRowProducts(arrayObjectProducts_GalaxyS, select.value);
            e.target.classList.add('product__filter-btn--selected');
            e.target.style.outline="none";
            for (var i=0;i<arrayButtons.length;i++)
            {
            	if (arrayButtons[i].id==e.target.id)
            		continue;
            	arrayButtons[i].classList.remove('product__filter-btn--selected');
            }
        }
    }
    if (arrayButtons[i].id=="gN")
    {
        arrayButtons[i].onclick=function(e) {
         	HienThiSortRowProducts(arrayObjectProducts_GalaxyNote, select.value);
            e.target.classList.add('product__filter-btn--selected');
            e.target.style.outline="none";
            for (var i=0;i<arrayButtons.length;i++)
            {
            	if (arrayButtons[i].id==e.target.id)
            		continue;
            	arrayButtons[i].classList.remove('product__filter-btn--selected');
            }
        }
    }
    if (arrayButtons[i].id=="gA")
    {
        arrayButtons[i].onclick=function(e) {
            HienThiSortRowProducts(arrayObjectProducts_GalaxyA, select.value);
            e.target.classList.add('product__filter-btn--selected');
            e.target.style.outline="none";
            for (var i=0;i<arrayButtons.length;i++)
            {
            	if (arrayButtons[i].id==e.target.id)
            		continue;
            	arrayButtons[i].classList.remove('product__filter-btn--selected');
            }
        }
    }
    if (arrayButtons[i].id=="gZ")
    {
        arrayButtons[i].onclick=function(e) {
            HienThiSortRowProducts(arrayObjectProducts_GalaxyZ, select.value);
            e.target.classList.add('product__filter-btn--selected');
            e.target.style.outline="none";
            for (var i=0;i<arrayButtons.length;i++)
            {
            	if (arrayButtons[i].id==e.target.id)
            		continue;
            	arrayButtons[i].classList.remove('product__filter-btn--selected');
            }
        }
    }
}

// Sort theo giá
var select=document.querySelector('#sort-price');
select.onchange=function(e) {
	var flag=false;
	for (var i=0;i<arrayButtons.length;i++)
	{
		if (arrayButtons[i].classList.contains('product__filter-btn--selected'))
		{
			if (arrayButtons[i].id=="gS")
				HienThiSortRowProducts(arrayObjectProducts_GalaxyS, e.target.value);
			if (arrayButtons[i].id=="gN")
				HienThiSortRowProducts(arrayObjectProducts_GalaxyNote, e.target.value);
			if (arrayButtons[i].id=="gA")
				HienThiSortRowProducts(arrayObjectProducts_GalaxyA, e.target.value);
			if (arrayButtons[i].id=="gZ")
				HienThiSortRowProducts(arrayObjectProducts_GalaxyZ, e.target.value);
			flag=true;
			break;	
		}
	}
	if (flag==false) 
	{
		HienThiSortRowProducts(arrayObjectProducts_Random, e.target.value);
	}
}

window.onscroll=function() {
	if (document.querySelector('body').scrollTop > 70 || document.documentElement.scrollTop > 70) {
		document.querySelector('.moveTop').style.opacity="1";
		document.querySelector('.moveTop').style.transition="opacity linear 0.4s";
	}
	else {
		document.querySelector('.moveTop').style.opacity="0";
		document.querySelector('.moveTop').style.transition="opacity linear 0.4s";
	}
}


